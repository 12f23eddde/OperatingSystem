**1. 为什么区分CPU密集型程序和I/O密集型程序对调度程序是重要的？**

这是因为CPU密集型程序和I/O密集型程序有不同的特征，对调度的需求也不同。

- CPU密集型程序

  CPU密集型程序往往需要大量的CPU时间，对响应时间的要求不是很高，大多数的过程都是可以打断的。

- I/O密集型程序

  I/O密集型程序会花费很多时间等待I/O设备响应（会处于SLEEP状态），对响应时间的要求较高，有部分过程不能打断（例如硬件初始化）。

一个较好的调度程序应该优先执行I/O密集型程序，并尽可能利用I/O事件的间隔运行CPU密集型程序，以最大限度地利用CPU，并减少I/O设备交互的响应时间。

**2. 讨论下列几对调度准则在某些情况下如何冲突：**

**2.1 CPU利用率和响应时间**

为了提高CPU利用率，最好的方法是尽量减少上下文切换，减少内核开销以最大限度利用CPU。然而若上下文切换较少，对响应时间要求较高的进程得不到频繁的调度，就会有较长的等待时间。

**2.2 平均周转时间和最大等待时间**

若调度器倾向于减少周转时间，则应该最大限度地让运行时间较短的进程先运行。例如最短剩余时间优先（STRN）的调度算法允许新来的短进程抢占原先的长进程，从而优化短进程的周转时间。然而，在短进程较多的情况下，长进程就会被频繁地抢占甚至由于得不到执行而造成饥饿，这意味着较长的等待时间。

**2.3 I/O设备利用率和CPU利用率**

若要提高I/O设备利用率，应该在I/O事件发生时立即进行上下文切换，调用新进程处理I/O事件，处理完之后再切换回之前的控制流。然而这样显然会造成频繁的上下文切换，从而降低CPU利用率。

**3. **对某系统进行监测后发现，在阻塞I/O之前，平均每个进程运行时间为$T$。一次进程切换需要的时间为$S$，这里$S$实际上就是开销。对于采用时间片长度为$Q$的轮转调度， 请给出以下各种情况的CPU利用率的计算公式：

**3.1 $Q = ∞$ **

此时调度算法与FIFO等价，利用率为$T/T+S$。

**3.2 $Q > T $**

在这里我们粗略地认为每个进程的运行时间都是$T$。

此时调度算法依然与FIFO等价，利用率为$T/T+S$。

**3.3 $S < Q < T $**

在单个进程执行时间$0-T$中，共要经过$\lceil T/Q \rceil$次上下文切换。

利用率为$T/T+\lceil T/Q \rceil *S$

**3.4 $ Q = S $**

是3.3情况的特例，利用率为50%。

**3.5 $Q \rightarrow 0$**

此时近乎所有的时间都用于上下文切换，利用率$\rightarrow 0$。

**4.1** 轮转调度程序的一个变种是回归轮转（regressive round-robin）调度程序。
这个调度程序为每个进程分配时间片和优先级，时间片的初值为50ms。
然而，如果一个进程获得CPU并获得它的整个时间片（不会因I/O而阻塞），那么它的时间片会增加10ms并且它的优先级会提升。（进程的时间片可以增加到最多100ms。）
如果一个进程在用完它的整个时间片之前阻塞，那么它的时间片会降低5ms而它的优先级不变。
回归轮状调度程序会偏爱哪类进程（CPU密集型的或I/O密集型的）？

会更加偏爱CPU密集型进程。

对于CPU密集型进程而言，其不会因为I/O事件而进程，会因此被分配到更多的时间片，获得更高的优先级。

而对于I/O密集型进程而言，其因为I/O时间阻塞，时间片则会减少。

因此相同优先级的CPU密集型进程比I/O密集型进程会有更大的机会被调度上CPU。

**5** 阅读《现代操作系统》2.4.4，回答下列问题。

**5.1** 一个实时系统有2个周期为5ms的电话任务，每次任务的CPU时间是1ms；还有一个周期为33ms的视频流任务，每次任务的CPU时间 是11ms。试问这个系统是可调度的吗？为什么？如果再加入一个视频流，系统还是可调度的吗？ 

我们以1s为单位分析这个系统：

1s中会进行400次电话任务，共需要400ms的CPU时间；1s中会进行30或31次视频流任务，最多需要741ms的CPU时间，因此系统是可以调度的。

若我们增加一个视频流，则至少需要1060ms的CPU时间，系统是不可调度的。

**5.2** 一个软实时系统有4个周期事件，其周期分别为50ms，100ms， 200ms和250ms。假设这4个事件分别需要35ms，20ms，10ms和$x$ ms 的CPU时间。保持系统可调度的最大$x$值是多少？

我们以1s为单位分析这个系统：

1s会进行20次A事件，10次B事件，5次C事件和4次D事件，共需要的CPU时间是$950+4x$ms。

$950+4x \leq 1000 \rightarrow x \leq 12.5$  最大的$x$值是12.5。

